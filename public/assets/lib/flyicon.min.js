async function flyHander(){console.log("fly ready");let e=0;"undefined"!=typeof pSleepMinutes&&(e=pSleepMinutes),pUrls=localStorage.getItem("flyUrls"+pAffiliateId),pUrls&&(e=pDelayMinutes),setTimeout((async()=>{console.log("fly start");let e=36e5,n=window.innerWidth,t=0,i=!0;n>=768?(t=pWidthPCScreen,i=pIncludeClose):(t=pWidthMobileScreen,"undefined"!=typeof pIncludeCloseMobile&&(i=pIncludeCloseMobile));let o=[],l=[];"KT20250001"==pAffiliateId&&(l=["https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/avatar/lmquang96-1758619494","https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/avatar/lmquang96-1758619803"]),"KT20250026"==pAffiliateId&&(l=["https://static.masothue.com/images/san-deal.png"]);let r=0;"undefined"!=typeof iconFollowLink&&1==iconFollowLink?(r=null!=u("pUrlIndex")?parseInt(u("pUrlIndex"))+1:0,r>=l.length&&(r=0)):r=Math.floor(Math.random()*l.length);let a=50;"undefined"!=typeof iconPosition&&(a=iconPosition),await async function(){if(flyUrls=I("flyUrls"+pAffiliateId),flyUrlsLoadTime=I("flyUrlsLoadTime"),!flyUrls||0==flyUrls.length||!flyUrlsLoadTime||Date.now()-flyUrlsLoadTime>=36e5){const e="MTcxNjY5NjAwMDBfVDdFUFBVSzJNNFVGTTZITU1UV1dQVEVVRUk3T0tQT1M",n=await fetch(`https://tkglobal.asia/api/common/get-urls-by-id?token=${e}&affId=${pAffiliateId}`),t=await n.json();"success"===t.status&&(flyUrls=t.response,U("flyUrls"+pAffiliateId,JSON.stringify(flyUrls)),U("flyUrlsLoadTime",Date.now()),o=flyUrls)}else flyUrls=JSON.parse(flyUrls),o=flyUrls}();let d="";"undefined"!=typeof iconXAxis&&"left"==iconXAxis?d+=`100% - ${pWidthMobileScreen}px - 8px`:d+="8px";let c=`\n        <div id="pvoucher-live-container" style="position: fixed; top: ${a}%; right: calc(${d}); transform: translateY(-50%)">\n                <div class="position: relative;">\n                    <div id="pvoucher-live-close" style="position: absolute; top: -20px; right: 0; background-color: #ffffff; border: 1px solid #bbbbbb; width: fit-content; display: inline; border-radius: 50%; padding: 3px 6px; font-size: 12px; font-weight: 600; cursor: pointer; line-height: initial;">\n                        &#10006;\n                    </div>\n                    <div id="pvoucher-live-icon" style="width: ${t}px; cursor: pointer;">\n                        <img src="${"https://res.cloudinary.com/dwszylalu/image/upload/v1693450477/popup/voucher_live_snhxhw.png"==l[r]?"https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/util/upload_document/20230929/voucher_live_snhxhw.png":l[r]}" alt="" style="width: 100%;">\n                    </div>\n                </div>\n            </div>\n        `,s=(new Date).getTime(),f=u("pEndLifeCircleTime");function p(e,n){localStorage.setItem(e,n)}function u(e){return localStorage.getItem(e)}function y(n,t){return n-t>pLoopTimeHours*e}function m(e){return e==o.length-1}function h(){document.querySelector("#pvoucher-live-container").style.display="none"}async function v(e,n){let t=u("pUrlIndex"),r=0;r="undefined"!=typeof iconFollowLink&&1==iconFollowLink?function(){let e=document.querySelector("#pvoucher-live-icon img").src;return l.indexOf(e)}()!=t?parseInt(t)+1:parseInt(t):parseInt(t)+1,r>=o.length&&(r=0),await m(r)&&(p("pEndLifeCircleTime",e),h()),p("pUrlIndex",r),i=!1,window.open(o[r],"_blank","noopener")}async function g(e=!1){let n=(new Date).getTime(),t=u("pEndLifeCircleTime");null!=u("pUrlIndex")?null!=t?await y(n,t)?v(n):e&&h():v(n):(await m(0)&&(p("pEndLifeCircleTime",n),h()),i=!1,p("pUrlIndex",0),window.open(o[0],"_blank","noopener"))}null!=f?await y(s,f)&&document.body.insertAdjacentHTML("beforeend",c):document.body.insertAdjacentHTML("beforeend",c),null!=document.querySelector("#pvoucher-live-icon")&&document.querySelector("#pvoucher-live-icon").addEventListener("click",(()=>{g()})),null!=document.querySelector("#pvoucher-live-close")&&document.querySelector("#pvoucher-live-close").addEventListener("click",(()=>{i?g(!0):h()}));const w=document.getElementById("pvoucher-live-icon");if(null!=w){!function e(){!function(e){let n=0;!function t(){const i=n/60,o=1-i,l=15*Math.sin(2*i*2*Math.PI)*o;w.style.transform=`rotate(${l}deg)`,n++,n<=60?requestAnimationFrame(t):(w.style.transform="rotate(0deg)",e&&e())}()}((()=>{setTimeout(e,1e3)}))}()}function U(e,n){localStorage.setItem(e,n)}function I(e){return localStorage.getItem(e)}}),60*e*1e3)}const screenSize=window.innerWidth;document.addEventListener("DOMContentLoaded",(async()=>{if(screenSize>=768)return!1;flyHander()}));
