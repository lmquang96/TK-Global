async function flyHander(){console.log("fly ready");let e=0;"undefined"!=typeof pSleepMinutes&&(e=pSleepMinutes),pUrls=localStorage.getItem("flyUrls"+pAffiliateId),pUrls&&(e=pDelayMinutes),setTimeout((async()=>{console.log("fly start");let e=36e5,n=window.innerWidth,t=0,o=!0;n>=768?(t=pWidthPCScreen,o=pIncludeClose):(t=pWidthMobileScreen,"undefined"!=typeof pIncludeCloseMobile&&(o=pIncludeCloseMobile));let i=[],l=[];"KT20250001"==pAffiliateId&&(l=["https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/avatar/lmquang96-1758619494","https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/avatar/lmquang96-1758619803"]);let r=0;"undefined"!=typeof iconFollowLink&&1==iconFollowLink?(r=null!=f("pUrlIndex")?parseInt(f("pUrlIndex"))+1:0,r>=l.length&&(r=0)):r=Math.floor(Math.random()*l.length);let a=50;"undefined"!=typeof iconPosition&&(a=iconPosition),await async function(){if(flyUrls=x("flyUrls"+pAffiliateId),flyUrlsLoadTime=x("flyUrlsLoadTime"),!flyUrls||0==flyUrls.length||!flyUrlsLoadTime||Date.now()-flyUrlsLoadTime>=36e5){const e="MTcxNjY5NjAwMDBfVDdFUFBVSzJNNFVGTTZITU1UV1dQVEVVRUk3T0tQT1M",n=await fetch(`https://tkglobal.asia/api/common/get-urls-by-id?token=${e}&affId=${pAffiliateId}`),t=await n.json();"success"===t.status&&(flyUrls=t.response,U("flyUrls"+pAffiliateId,JSON.stringify(flyUrls)),U("flyUrlsLoadTime",Date.now()),i=flyUrls)}else flyUrls=JSON.parse(flyUrls),i=flyUrls}();let d="";"undefined"!=typeof iconXAxis&&"left"==iconXAxis?d+=`100% - ${pWidthMobileScreen}px - 8px`:d+="8px";let c=`\n        <div id="pvoucher-live-container" style="position: fixed; top: ${a}%; right: calc(${d}); transform: translateY(-50%)">\n                <div class="position: relative;">\n                    <div id="pvoucher-live-close" style="position: absolute; top: -20px; right: 0; background-color: #ffffff; border: 1px solid #bbbbbb; width: fit-content; display: inline; border-radius: 50%; padding: 3px 6px; font-size: 12px; font-weight: 600; cursor: pointer; line-height: initial;">\n                        &#10006;\n                    </div>\n                    <div id="pvoucher-live-icon" style="width: ${t}px; cursor: pointer;">\n                        <img src="${"https://res.cloudinary.com/dwszylalu/image/upload/v1693450477/popup/voucher_live_snhxhw.png"==l[r]?"https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/util/upload_document/20230929/voucher_live_snhxhw.png":l[r]}" alt="" style="width: 100%;">\n                    </div>\n                </div>\n            </div>\n        `,s=(new Date).getTime(),u=f("pEndLifeCircleTime");function p(e,n){localStorage.setItem(e,n)}function f(e){return localStorage.getItem(e)}function y(n,t){return n-t>pLoopTimeHours*e}function h(e){return e==i.length-1}function m(){document.querySelector("#pvoucher-live-container").style.display="none"}async function v(e,n){let t=f("pUrlIndex"),r=0;r="undefined"!=typeof iconFollowLink&&1==iconFollowLink?function(){let e=document.querySelector("#pvoucher-live-icon img").src;"https://s3.ap-southeast-1.amazonaws.com/adpia.vn/util/upload_document/20230929/voucher_live_snhxhw.png"==e&&(e="https://res.cloudinary.com/dwszylalu/image/upload/v1693450477/popup/voucher_live_snhxhw.png");return l.indexOf(e)}()!=t?parseInt(t)+1:parseInt(t):parseInt(t)+1,r>=i.length&&(r=0),await h(r)&&(p("pEndLifeCircleTime",e),m()),p("pUrlIndex",r),o=!1,window.open(i[r],"_blank","noopener")}async function g(e=!1){let n=(new Date).getTime(),t=f("pEndLifeCircleTime");null!=f("pUrlIndex")?null!=t?await y(n,t)?v(n):e&&m():v(n):(await h(0)&&(p("pEndLifeCircleTime",n),m()),o=!1,p("pUrlIndex",0),window.open(i[0],"_blank","noopener"))}null!=u?await y(s,u)&&document.body.insertAdjacentHTML("beforeend",c):document.body.insertAdjacentHTML("beforeend",c),null!=document.querySelector("#pvoucher-live-icon")&&document.querySelector("#pvoucher-live-icon").addEventListener("click",(()=>{g()})),null!=document.querySelector("#pvoucher-live-close")&&document.querySelector("#pvoucher-live-close").addEventListener("click",(()=>{o?g(!0):m()}));const w=document.getElementById("pvoucher-live-icon");if(null!=w){!function e(){!function(e){let n=0;!function t(){const o=n/60,i=1-o,l=15*Math.sin(2*o*2*Math.PI)*i;w.style.transform=`rotate(${l}deg)`,n++,n<=60?requestAnimationFrame(t):(w.style.transform="rotate(0deg)",e&&e())}()}((()=>{setTimeout(e,1e3)}))}()}function U(e,n){localStorage.setItem(e,n)}function x(e){return localStorage.getItem(e)}}),60*e*1e3)}const screenSize=window.innerWidth;document.addEventListener("DOMContentLoaded",(async()=>{if(screenSize>=768)return!1;flyHander()}));