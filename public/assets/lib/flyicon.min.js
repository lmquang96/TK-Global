async function flyHander(){console.log("fly ready");let e=0;"undefined"!=typeof pSleepMinutes&&(e=pSleepMinutes),pUrls=localStorage.getItem("flyUrls"+pAffiliateId),pUrls&&(e=pDelayMinutes),setTimeout((async()=>{console.log("fly start");let e=36e5,n=window.innerWidth,t=0,i=!0;n>=768?(t=pWidthPCScreen,i=pIncludeClose):(t=pWidthMobileScreen,"undefined"!=typeof pIncludeCloseMobile&&(i=pIncludeCloseMobile));let o=[],l=[];"KT20250026"==pAffiliateId&&(l=["https://static.masothue.com/images/san-deal.png"]),z,"undefined"!=typeof iconFollowLink&&1==iconFollowLink?(pBannerIndex=null!=f("pUrlIndex")?parseInt(f("pUrlIndex"))+1:0,pBannerIndex>=l.length&&(pBannerIndex=0)):pBannerIndex=Math.floor(Math.random()*l.length);let r=50;"undefined"!=typeof iconPosition&&(r=iconPosition),await async function(){if(flyUrls=w("flyUrls"+pAffiliateId),flyUrlsLoadTime=w("flyUrlsLoadTime"),!flyUrls||0==flyUrls.length||!flyUrlsLoadTime||Date.now()-flyUrlsLoadTime>=36e5){const e="MTcxNjY5NjAwMDBfVDdFUFBVSzJNNFVGTTZITU1UV1dQVEVVRUk3T0tQT1M",n=await fetch(`https://tkglobal.asia/api/common/get-urls-by-id?token=${e}&affId=${pAffiliateId}`),t=await n.json();"success"===t.status&&(flyUrls=t.response,I("flyUrls"+pAffiliateId,JSON.stringify(flyUrls)),I("flyUrlsLoadTime",Date.now()),o=flyUrls)}else flyUrls=JSON.parse(flyUrls),o=flyUrls}();let d="";"undefined"!=typeof iconXAxis&&"left"==iconXAxis?d+=`100% - ${pWidthMobileScreen}px - 8px`:d+="8px";let c=`\n        <div id="pvoucher-live-container" style="position: fixed; top: ${r}%; right: calc(${d}); transform: translateY(-50%)">\n                <div class="position: relative;">\n                    <div id="pvoucher-live-close" style="position: absolute; top: -20px; right: 0; background-color: #ffffff; border: 1px solid #bbbbbb; width: fit-content; display: inline; border-radius: 50%; padding: 3px 6px; font-size: 12px; font-weight: 600; cursor: pointer; line-height: initial;">\n                        &#10006;\n                    </div>\n                    <div id="pvoucher-live-icon" style="width: ${t}px; cursor: pointer;">\n                        <img src="${"https://res.cloudinary.com/dwszylalu/image/upload/v1693450477/popup/voucher_live_snhxhw.png"==l[pBannerIndex]?"https://d22k0f5x9iaayd.cloudfront.net/adpia.vn/util/upload_document/20230929/voucher_live_snhxhw.png":l[pBannerIndex]}" alt="" style="width: 100%;">\n                    </div>\n                </div>\n            </div>\n        `,a=(new Date).getTime(),s=f("pEndLifeCircleTime");function p(e,n){localStorage.setItem(e,n)}function f(e){return localStorage.getItem(e)}function u(n,t){return n-t>pLoopTimeHours*e}function y(e){return e==o.length-1}function m(){document.querySelector("#pvoucher-live-container").style.display="none"}async function h(e,n){let t=f("pUrlIndex"),r=0;r="undefined"!=typeof iconFollowLink&&1==iconFollowLink?function(){let e=document.querySelector("#pvoucher-live-icon img").src;return l.indexOf(e)}()!=t?parseInt(t)+1:parseInt(t):parseInt(t)+1,r>=o.length&&(r=0),await y(r)&&(p("pEndLifeCircleTime",e),m()),p("pUrlIndex",r),i=!1,window.open(o[r],"_blank","noopener")}async function v(e=!1){let n=(new Date).getTime(),t=f("pEndLifeCircleTime");null!=f("pUrlIndex")?null!=t?await u(n,t)?h(n):e&&m():h(n):(await y(0)&&(p("pEndLifeCircleTime",n),m()),i=!1,p("pUrlIndex",0),window.open(o[0],"_blank","noopener"))}null!=s?await u(a,s)&&document.body.insertAdjacentHTML("beforeend",c):document.body.insertAdjacentHTML("beforeend",c),null!=document.querySelector("#pvoucher-live-icon")&&document.querySelector("#pvoucher-live-icon").addEventListener("click",(()=>{v()})),null!=document.querySelector("#pvoucher-live-close")&&document.querySelector("#pvoucher-live-close").addEventListener("click",(()=>{i?v(!0):m()}));const g=document.getElementById("pvoucher-live-icon");if(null!=g){!function e(){!function(e){let n=0;!function t(){const i=n/60,o=1-i,l=15*Math.sin(2*i*2*Math.PI)*o;g.style.transform=`rotate(${l}deg)`,n++,n<=60?requestAnimationFrame(t):(g.style.transform="rotate(0deg)",e&&e())}()}((()=>{setTimeout(e,1e3)}))}()}function I(e,n){localStorage.setItem(e,n)}function w(e){return localStorage.getItem(e)}}),60*e*1e3)}const screenSize=window.innerWidth;document.addEventListener("DOMContentLoaded",(async()=>{if(screenSize>=768)return!1;flyHander()}));
